
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Team.Me.</title>

  <!--
    This example is good for starting from.
  -->

  <script type="text/javascript" charset="utf-8" src="domready.js"></script>
  <script type="text/javascript" charset="utf-8" src="MathBox-bundle.js"></script>

  <script type="text/javascript">
  var colors = [0x000000,0xff0000,0x00ff00,0x0000ff,0xffff00,0xff00ff,0x00ffff,0x888888,0x88ff00,0xff8800,0x8888ff,0x888800,0xff88ff,0x888800,0x880088];
  function killit(mb,data){
    //   mb.axis({
    //       id: 'a',
    //       axis: 2,
    //       offset: [0, 0, 0],
    //       ticks: 0,
    //       arrow:false,
    //       lineWidth:1
    //   });
      mb.grid({
          id:"grid1",
          axis:[0,2],
          ticks:[6,6],
      });
      mb.grid({
          id:"grid2",
          axis:[0,1],
          ticks:[6,6]
      });
      mb.grid({
          id:"grid3",
          axis:[2,1],
          ticks:[6,6]
      });

    // var data = {
    //     "items" : [{"group": 2, "value": [0.727706478239595, 0.7168812886325915, 0.16000559925666935]}, {"group": 5, "value": [0.9415724103760714, 0.9595724163477465, 0.6210839451946106]}, {"group": 7, "value": [0.09986774492313366, 0.18292230232489826, 0.9697807612548358]}, {"group": 6, "value": [0.3457146382316826, 0.06954791616355982, 0.8811027844872182]}, {"group": 4, "value": [0.1368753623696154, 0.5636323180379953, 0.6908458763639609]}, {"group": 1, "value": [0.6564797523396653, 0.12281794791493383, 0.1738898940309478]}, {"group": 3, "value": [0.21895122580354787, 0.9604564906319124, 0.47815953077477635]}, {"group": 4, "value": [0.7890038162637544, 0.661995425158086, 0.2532191190565979]}, {"group": 5, "value": [0.04621312142812739, 0.7439468838539588, 0.1116708100771906]}, {"group": 3, "value": [0.7855443315477926, 0.7190688207188779, 0.28184449664942857]}, {"group": 2, "value": [0.27859259061208463, 0.41567856577227336, 0.5076127827426042]}, {"group": 6, "value": [0.6305526563435367, 0.9923661159213755, 0.1345530478553787]}, {"group": 5, "value": [0.797913357280508, 0.8268212565565579, 0.5880342283778024]}, {"group": 3, "value": [0.3090807805276963, 0.11735068603784904, 0.9130407064612779]}, {"group": 5, "value": [0.4380872403947875, 0.8489711123204852, 0.1731363846111118]}, {"group": 4, "value": [0.4496790088039119, 0.7953058006937975, 0.2672034112256685]}, {"group": 4, "value": [0.14479550746322845, 0.9405439229954091, 0.091689778474911]}, {"group": 5, "value": [0.3609855349669999, 0.42305645371811684, 0.3285999966737836]}, {"group": 7, "value": [0.6951492457790401, 0.14076414566593431, 0.5689809337953359]}, {"group": 3, "value": [0.6576645874166088, 0.8795948784383841, 0.7322895317029707]}, {"group": 2, "value": [0.17923466245309738, 0.017076357229556582, 0.7675305521188782]}, {"group": 7, "value": [0.9570157445994899, 0.5103231811667134, 0.39407225632344267]}, {"group": 4, "value": [0.5560014514130048, 0.24862201906451098, 0.3205148698659719]}, {"group": 4, "value": [0.2759877952428047, 0.3165785866884301, 0.0030968052451081363]}, {"group": 6, "value": [0.49184078723322255, 0.325888661671092, 0.7067272170501602]}, {"group": 2, "value": [0.36186766415544636, 0.18200728996870352, 0.5345230327544411]}, {"group": 4, "value": [0.8032068983248506, 0.9295773464117383, 0.8776902094672502]}, {"group": 2, "value": [0.6311058039199202, 0.1710867538466373, 0.8073574162918269]}, {"group": 0, "value": [0.8055962439377453, 0.8849502981424815, 0.7540864544908646]}, {"group": 7, "value": [0.8489599125329348, 0.8080351996361983, 0.4502014073498942]}, {"group": 4, "value": [0.498900463397945, 0.773687086075349, 0.7075260410569705]}, {"group": 5, "value": [0.4201069949795255, 0.6574268651896259, 0.9332307913792489]}, {"group": 4, "value": [0.5878587298541985, 0.288219189680891, 0.3421399526590345]}, {"group": 3, "value": [0.5461207570253483, 0.381252496394899, 0.5547028081393119]}, {"group": 7, "value": [0.042869059286501865, 0.4416393252745634, 0.8294685675886654]}, {"group": 3, "value": [0.9605295069651781, 0.9843231435909797, 0.9580367436787612]}, {"group": 0, "value": [0.31765806937561214, 0.530553161693994, 0.25133834635659624]}, {"group": 7, "value": [0.8513065147950988, 0.15293292890031096, 0.3932122192131551]}, {"group": 3, "value": [0.8227325905733451, 0.5543979392463076, 0.07749870137940051]}, {"group": 2, "value": [0.46465425978963304, 0.4030133464061366, 0.6695021501390237]}, {"group": 6, "value": [0.5518339506633273, 0.7959196913664317, 0.6923420396913342]}, {"group": 0, "value": [0.6283888393397181, 0.42900477226612244, 0.25279239919056484]}, {"group": 3, "value": [0.49215948506942164, 0.1469728485576436, 0.7211277760854363]}, {"group": 6, "value": [0.9012827522028868, 0.6080442505505638, 0.29013131190438635]}, {"group": 7, "value": [0.4582653581936337, 0.3921716902328938, 0.28205583447010485]}, {"group": 6, "value": [0.41921517384577056, 0.8819085707516494, 0.15009332962214272]}, {"group": 0, "value": [0.12584983093989066, 0.2695634905476496, 0.3802651251488113]}, {"group": 3, "value": [0.15697677036242474, 0.43851178265709123, 0.5315524747395327]}, {"group": 6, "value": [0.6932839721167112, 0.5785137298190589, 0.8273193608150774]}, {"group": 0, "value": [0.19067333028068745, 0.27842674240375165, 0.039364354787353895]}, {"group": 3, "value": [0.3794130118239829, 0.8697876013522191, 0.7090067016635524]}, {"group": 5, "value": [0.8592264724434294, 0.8255311686399989, 0.4966546597430983]}, {"group": 5, "value": [0.2846708980770125, 0.578388204521997, 0.05272712235171528]}, {"group": 0, "value": [0.1396434267646237, 0.8362406187447066, 0.008368575214563911]}, {"group": 4, "value": [0.7808266803330289, 0.8510778234089608, 0.2766718723801531]}, {"group": 2, "value": [0.07058575827322244, 0.7955257088593354, 0.15762774439937044]}, {"group": 5, "value": [0.03922872906395414, 0.6348829306089091, 0.5794741906261757]}, {"group": 3, "value": [0.5788924902785837, 0.4459453688889151, 0.7114838813822217]}, {"group": 5, "value": [0.9171142415336698, 0.2665715722878542, 0.06538005332064789]}, {"group": 4, "value": [0.15243750677581935, 0.8525066729352486, 0.6513384668233073]}, {"group": 1, "value": [0.8093534794446944, 0.417146208657705, 0.774523114177731]}, {"group": 7, "value": [0.4075438004084152, 0.0074609593600520885, 0.9925610483003435]}, {"group": 3, "value": [0.6855190442175804, 0.7366025571014388, 0.4270998361521434]}, {"group": 2, "value": [0.49175962906251947, 0.9990850480725778, 0.4641901604950186]}, {"group": 7, "value": [0.06389694721438899, 0.2827913999313123, 0.2039325156700027]}, {"group": 7, "value": [0.11638478743801484, 0.9018515938025196, 0.4622215045321504]}, {"group": 3, "value": [0.10132655271487434, 0.932238283638119, 0.07965477062660087]}, {"group": 5, "value": [0.917170196165522, 0.9230427386884166, 0.7318890151835373]}, {"group": 3, "value": [0.25652852627239753, 0.7207014466714956, 0.3938738775793794]}, {"group": 4, "value": [0.2551013048821795, 0.2243620093817823, 0.12989184198128645]}, {"group": 1, "value": [0.027482648790378206, 0.92926851762691, 0.13141603295246673]}, {"group": 0, "value": [0.04602637880161509, 0.6553742300640637, 0.9038638631238813]}, {"group": 6, "value": [0.7980888549582462, 0.8678859996838553, 0.17940018342240716]}, {"group": 5, "value": [0.922853469525834, 0.2983742268112163, 0.24861213882715827]}, {"group": 4, "value": [0.03043354636543627, 0.4836015018494152, 0.7919337194117589]}, {"group": 1, "value": [0.13753500599192758, 0.3944624971951759, 0.3822727967000541]}, {"group": 7, "value": [0.9343108402451793, 0.1193459641868071, 0.9803836767933369]}, {"group": 4, "value": [0.7235713504988046, 0.12104745425193875, 0.9268254446843708]}, {"group": 5, "value": [0.04281058025692153, 0.07522031026214104, 0.5436954407304826]}, {"group": 7, "value": [0.6696116453850387, 0.7813336148418449, 0.82745678414254]}, {"group": 2, "value": [0.900623826889912, 0.44449494958717395, 0.7550093505487597]}, {"group": 6, "value": [0.880147532328962, 0.2188331818832896, 0.687427563700182]}, {"group": 7, "value": [0.570183677910812, 0.585725286060685, 0.8976254884555391]}, {"group": 7, "value": [0.5591886071317427, 0.034984229760705365, 0.6312483871362167]}, {"group": 1, "value": [0.4604344865415274, 0.9927835003268103, 0.7943671475724436]}, {"group": 3, "value": [0.15135764117864947, 0.7232992612865997, 0.04931387064820303]}, {"group": 5, "value": [0.13258025335070833, 0.09948891243756808, 0.06582739031283891]}, {"group": 7, "value": [0.5461048473584276, 0.06532072559697555, 0.6981884463525043]}, {"group": 0, "value": [0.0430245570526997, 0.665923413462794, 0.7049946734616935]}, {"group": 1, "value": [0.9791942000014561, 0.7911639155187662, 0.9348699702581691]}, {"group": 3, "value": [0.8805151909815072, 0.2412487524295016, 0.6672230524173126]}, {"group": 3, "value": [0.3684449342579328, 0.18467163172214263, 0.3823798897839429]}, {"group": 0, "value": [0.7636696195238396, 0.527530613075369, 0.1976174991821137]}, {"group": 0, "value": [0.5902953865706844, 0.10610678973011178, 0.8322703630389857]}, {"group": 0, "value": [0.7651271442345352, 0.49431285838589467, 0.864753815158218]}, {"group": 6, "value": [0.32771959427956077, 0.41475849258224273, 0.8003978811811222]}, {"group": 3, "value": [0.945056066833507, 0.8881604263747951, 0.7543984922715168]}, {"group": 0, "value": [0.8798321970760045, 0.39539234342059204, 0.9955836097081375]}, {"group": 4, "value": [0.7820468829882157, 0.6734340173712227, 0.5997366690358276]}, {"group": 1, "value": [0.8826984224757684, 0.7713842726608098, 0.057568834504064026]}, {"group": 0, "value": [0.9896989044261438, 0.8900333326304813, 0.3557403650218519]}, {"group": 4, "value": [0.9395715035903152, 0.3553485545902474, 0.6981881473267719]}, {"group": 6, "value": [0.4948339368312036, 0.436756003428577, 0.9730147189882614]}, {"group": 4, "value": [0.022522142746859264, 0.9970338898978133, 0.2946933914218729]}, {"group": 5, "value": [0.3045191548439289, 0.6677158772332846, 0.5656278827079366]}, {"group": 0, "value": [0.44149192653006164, 0.014731757358681041, 0.4043656399811819]}, {"group": 5, "value": [0.5409858608805269, 0.9540174280143535, 0.9075491145345247]}, {"group": 2, "value": [0.4616508984139769, 0.4610727277015986, 0.30900906723539556]}, {"group": 4, "value": [0.23305841522912463, 0.3069608146336428, 0.936953781622809]}, {"group": 1, "value": [0.33044662258176916, 0.3326011552460627, 0.027741242399986432]}, {"group": 7, "value": [0.5615959933298829, 0.010795065398122361, 0.8187844724066996]}, {"group": 3, "value": [0.7294177719754513, 0.9687049811517686, 0.6871409781516605]}, {"group": 4, "value": [0.688015122701535, 0.012166625288521637, 0.7317582514534311]}, {"group": 5, "value": [0.3870259611870154, 0.865302239592713, 0.14820240878755708]}, {"group": 5, "value": [0.0787555170496893, 0.5798490873364149, 0.5217275242308864]}, {"group": 3, "value": [0.01283905085355641, 0.8629817733734596, 0.5338224283810374]}, {"group": 5, "value": [0.20281243989840336, 0.28136276744568445, 0.9780618876003397]}, {"group": 7, "value": [0.9161835990542361, 0.3951944966819704, 0.011887182186063217]}, {"group": 3, "value": [0.18264148101329036, 0.23240675843017078, 0.36541732729370635]}, {"group": 0, "value": [0.7558676362569474, 0.9707944976729775, 0.2778718392264351]}, {"group": 4, "value": [0.48854510779355165, 0.9084212652110402, 0.8028528441342715]}, {"group": 4, "value": [0.1970791768901089, 0.3232034985764941, 0.008767406392390154]}, {"group": 1, "value": [0.20027579696484687, 0.9340691156833486, 0.7182213248605779]}, {"group": 2, "value": [0.8812875008449563, 0.30428093581125504, 0.5799788184137903]}, {"group": 4, "value": [0.637295368057345, 0.5710461409931199, 0.24221882189179877]}, {"group": 3, "value": [0.581646552746698, 0.13654433682453382, 0.5345467589762203]}, {"group": 7, "value": [0.3477642471609933, 0.389697062754509, 0.7094727645845709]}, {"group": 5, "value": [0.7737106403571582, 0.03514965870915132, 0.6246676039513713]}, {"group": 3, "value": [0.6556894073908063, 0.5708896260400849, 0.3156518024334105]}, {"group": 2, "value": [0.5902281616886451, 0.6648093353343497, 0.5494150650956878]}, {"group": 6, "value": [0.21744301931097954, 0.7343507842065123, 0.34349759458358464]}, {"group": 3, "value": [0.3534410300306916, 0.3146522519575119, 0.5877709972271141]}, {"group": 5, "value": [0.5061810978047654, 0.5849810981436654, 0.25931431831593854]}, {"group": 0, "value": [0.37956772510669123, 0.3121697265170926, 0.0726897122696678]}, {"group": 3, "value": [0.5140290183780536, 0.36908111478758854, 0.22937772129243927]}, {"group": 4, "value": [0.6879162190331923, 0.7099368545764995, 0.566621996822753]}, {"group": 2, "value": [0.7701112423173739, 0.7835998268359898, 0.07017811022698883]}, {"group": 1, "value": [0.16749067813294605, 0.3917443062358943, 0.9533411938804378]}, {"group": 0, "value": [0.6951695569545113, 0.3421212135711412, 0.6083236759322896]}, {"group": 1, "value": [0.6326457393898705, 0.20689316107042144, 0.4682679090708043]}, {"group": 5, "value": [0.21555926874152165, 0.5950154671300366, 0.1888630936185689]}, {"group": 0, "value": [0.678292029256339, 0.3066659523227393, 0.6126917793726566]}, {"group": 4, "value": [0.6404278746153288, 0.14571073501235954, 0.47903506626856174]}, {"group": 2, "value": [0.691777976480502, 0.40447539882873296, 0.7384468315558229]}, {"group": 4, "value": [0.022422992767715755, 0.368597203569219, 0.9794573655444253]}, {"group": 0, "value": [0.8174543235034852, 0.4608908609388571, 0.1883251495170425]}, {"group": 3, "value": [0.03334256539291702, 0.657062685773666, 0.16794968456679416]}, {"group": 1, "value": [0.21725520167046686, 0.1889721145795984, 0.35314735060945057]}, {"group": 6, "value": [0.9376720672590472, 0.9194721739642966, 0.13714509128358954]}, {"group": 7, "value": [0.6055950276450308, 0.47650740256596436, 0.9440390284100362]}, {"group": 5, "value": [0.6970414877489363, 0.035327448619094204, 0.8222359600657805]}, {"group": 1, "value": [0.619895893520519, 0.8852126377320668, 0.6297484101725982]}, {"group": 5, "value": [0.023346529924003434, 0.27438552264511795, 0.6671868301169094]}, {"group": 1, "value": [0.283980625278192, 0.7551137350278858, 0.7212269276170791]}, {"group": 3, "value": [0.5254306050151942, 0.766309022117094, 0.7041486332036582]}, {"group": 1, "value": [0.45405610209105496, 0.6246421974963865, 0.6629121743157677]}, {"group": 1, "value": [0.7963264093694501, 0.22665133669036508, 0.8057994868769515]}, {"group": 0, "value": [0.034609029395458846, 0.23867971877305727, 0.7911217442228584]}, {"group": 2, "value": [0.18888753504795686, 0.2715530212500743, 0.7163113999991382]}, {"group": 5, "value": [0.09977031681023707, 0.15211369213840054, 0.740037900542747]}, {"group": 2, "value": [0.8465328151821986, 0.3654137421977067, 0.8641309173356801]}, {"group": 1, "value": [0.14630727630737628, 0.3945168538008602, 0.7746125636005879]}, {"group": 4, "value": [0.4248835770286148, 0.8142092045936603, 0.49441109758915724]}, {"group": 0, "value": [0.5005308256401076, 0.5569268954684811, 0.8294315820810367]}, {"group": 7, "value": [0.6586974813571973, 0.12519437755893192, 0.201205891153167]}, {"group": 7, "value": [0.3813221932074331, 0.4576862787878948, 0.4086207715632344]}, {"group": 7, "value": [0.17111038648122423, 0.3864885238801983, 0.8749769950029199]}, {"group": 1, "value": [0.7782655506766736, 0.6010095565103505, 0.7554166285049478]}, {"group": 0, "value": [0.7379683444823639, 0.2156343220528938, 0.6356340902933546]}, {"group": 2, "value": [0.06024516042877348, 0.8662545590990838, 0.7594193352639703]}, {"group": 7, "value": [0.4756510915482822, 0.1580450552231779, 0.5771688980060787]}, {"group": 3, "value": [0.9287590941247598, 0.2740031928697714, 0.39723773982145294]}, {"group": 0, "value": [0.16830807158116623, 0.7509144427632427, 0.0086726265549949]}, {"group": 1, "value": [0.4228306465270818, 0.7970200243529045, 0.7557425307900945]}, {"group": 0, "value": [0.6521963490061515, 0.279876701164103, 0.8559178984758528]}, {"group": 5, "value": [0.1980632198340665, 0.7007648984858194, 0.8098288092878703]}, {"group": 2, "value": [0.7504651146411181, 0.24349952750322035, 0.13501915301645673]}, {"group": 2, "value": [0.3717476625938525, 0.11169120575193348, 0.3832783838236996]}, {"group": 7, "value": [0.3326659611563587, 0.29104296089922366, 0.7710182701855176]}, {"group": 3, "value": [0.691958110830186, 0.9860073836247014, 0.053073758658019554]}, {"group": 2, "value": [0.8595298370035092, 0.6296028468252151, 0.40502484826273333]}, {"group": 4, "value": [0.7085925375741265, 0.16276499095155383, 0.16033356812261101]}, {"group": 7, "value": [0.6426597286766194, 0.48645230994820177, 0.5935140076176588]}, {"group": 7, "value": [0.42548570280689646, 0.35000414916609335, 0.6750639746986105]}, {"group": 5, "value": [0.9078173670972274, 0.03918785520707313, 0.7175388909307471]}, {"group": 3, "value": [0.031710573251588214, 0.6578592706020574, 0.6009476071793631]}, {"group": 2, "value": [0.813151775263984, 0.47737585441686436, 0.137659345578363]}, {"group": 0, "value": [0.1655541537840186, 0.35408592407030715, 0.5838882029231564]}, {"group": 2, "value": [0.21750858986584554, 0.3096170638147877, 0.3841147243430497]}, {"group": 2, "value": [0.49715845022836413, 0.18453089061301153, 0.5200461610028064]}, {"group": 2, "value": [0.20043673395245687, 0.40736536278216195, 0.39328452967116334]}, {"group": 4, "value": [0.10811442445903263, 0.8973305082650636, 0.909027258664429]}, {"group": 4, "value": [0.8726528998318861, 0.48804469216039315, 0.7193495213451774]}, {"group": 7, "value": [0.36723238098248623, 0.7391150849770195, 0.0007038711385418672]}, {"group": 0, "value": [0.2841161975256895, 0.9125537852640628, 0.06502168029616917]}, {"group": 6, "value": [0.39124155007278805, 0.5611131665905722, 0.750768286878847]}, {"group": 3, "value": [0.6052100954952524, 0.6297500452643119, 0.46666186876984217]}, {"group": 0, "value": [0.4445840694060176, 0.25091560990468476, 0.5027071612601574]}, {"group": 4, "value": [0.8429654710665118, 0.9594569643622376, 0.9411503365762929]}, {"group": 0, "value": [0.7879105350862117, 0.2912229218706439, 0.1789501707355028]}]
    // };

      var points = [];

      // Normalize Data
      var maxs = [-99999,-99999,-99999];
      var mins = [99999,99999,99999];
      for (var i = 0;i<data.items.length;i++){
          for (var u = 0; u < mins.length; u++){
                if (data.items[i].value[u] > maxs[u]){
                    maxs[u] = data.items[i].value[u];
                }
                if (data.items[i].value[u] < mins[u]){
                    mins[u] = data.items[i].value[u];
                }
          }
      }

    var mults = [3.5,3.5,1.5];
      for (var i = 0;i<data.items.length;i++){
          for (var u = 0; u < mins.length; u++){
              data.items[i].value[u] = (data.items[i].value[u] - mins[u]) / (maxs[u] - mins[u]);
              data.items[i].value[u] -= .5;
          }
          data.items[i].value[0] *= mults[0];
          data.items[i].value[1] *= mults[1];
          data.items[i].value[2] *= mults[2];
        //   data.items[i].value[0] -= 2;
        //   data.items[i].value[1] -= 2;
      }

      for (var i = 0; i < data.items.length;i++){
          setTimeout(function(data,i){
              return function(){
                var point = [data.items[i].value[0],data.items[i].value[1],data.items[i].value[2]/1000];
                points.push(point);

                mb.curve({
                    id:"d" + i,
                    n:5,
                    expression: function(){
                        var p = point;
                        var cp = [(Math.random()-.5) * mults[0], (Math.random()-.5) * mults[1], (Math.random()-.5) * mults[2]];
                        return function(x,y){
                            cp[0] -= (cp[0] - p[0])/100;
                            cp[1] -= (cp[1] - p[1])/100;
                            cp[2] -= (cp[2] - p[2])/100;
                            return cp;
                        };
                    }(),
                    domain:[-5,5],
                    line:false,
                    points:true,
                    pointSize:10,
                    color:0x888888

                });
            };
        }(data,i),2000 / data.items.length * i);

      }

      function merge(){
          for (var i = 0;i < colors.length;i++){
              var lines = [];
              for (var u = 0;u < data.items.length;u++){
                  if (data.items[u].group == i){
                      lines.push(points[u]);
                  }
              }
              setTimeout(
                  function(lines,i){
                      return function(){
                          var avg = [0,0,0];
                          for (var u = 0;u < lines.length;u++){
                              avg[0] += lines[u][0];
                              avg[1] += lines[u][1];
                              avg[2] += lines[u][2];
                          }
                          avg[0] /= lines.length;
                          avg[1] /= lines.length;
                          avg[2] /= lines.length;

                          for (var u = 0; u < lines.length; u++){
                              lines[u][0] = avg[0];
                              lines[u][1] = avg[1];
                              lines[u][2] = avg[2];
                          }

                          mb.curve({
                              id:"g" + i,
                              n:1,
                              data:[avg],
                              domain:[-5,5],
                              line:false,
                              points:true,
                              pointSize:25,
                              color:colors[i%colors.length]
                          }).transition(1000);

                          setTimeout(function(){
                              for (var u = 0;u < data.items.length;u++){
                                  if (data.items[u].group == i){
                                      mb.remove("#d" + u);
                                  }
                              }
                          },1000);
                    }
                  }(lines,i)
                , 500 * i);
          }
      }

      function recolor(){
          for (var i = 0;i<data.items.length;i++){
              mathbox.animate("#d" + i,
                {color:colors[data.items[i].group%colors.length]},
                {duration:1000});
          }
          for (var i = 0;i < colors.length;i++){
              var lines = [];
              for (var u = 0;u < data.items.length;u++){
                  if (data.items[u].group == i){
                      lines.push(points[u]);
                  }
              }
              setTimeout(
                  function(lines,i){
                      return function(){
                          mb.curve({
                              id:"l" + i,
                              n:lines.length,
                              data: lines,
                              domain:[-5,5],
                              line:true,
                              points:false,
                              lineSize:2,
                              color:colors[i%colors.length]
                          }).transition(200);
                      };
                  }(lines,i)
                , 300 * i);
          }
          setTimeout(merge, 300 * colors.length);
      }

      setTimeout(function(){
          setTimeout(function(){
              for (var i = 0;i < points.length;i++){
                  points[i][2] = data.items[i].value[2];
              }
              setTimeout(recolor, 1000);
          },1200);
          mathbox.animate('camera', { orbit: 5, phi: τ*1/8 + .2, theta:τ/16 }, { duration: 1000 });
          mathbox.animate('#grid1', {offset:[0,-2,0]}, {duration:1000});
          mathbox.animate('#grid2', {offset:[0,0,-1]}, {duration:1000});
          mathbox.animate('#grid3', {offset:[-3,0,0]}, {duration:1000});
      },4000);

      setInterval(function(){

      },1000/60);

  }
  </script>

  <script type="text/javascript">
    DomReady.ready(function () {
      if (location.href.match(/^file:/)) {
        document.getElementById('info').style.opacity = 1;
        document.getElementById('info').innerHTML = "Sorry. This example does not work when accessed using file://. Please use an http:// host and try again.";
      }
    });
  </script>

  <script type="text/javascript">

  function mathboxSetup(mathbox) {
    // Viewport camera/setup
    mathbox
      // Cartesian viewport
      .viewport({
        type: 'cartesian',
        range: [[-3, 3], [-2, 2], [-1, 1]],
        scale: [1.5, 1, 1],
      })
      .camera({
        orbit: 3.5,//3.5
        phi: τ/4,
        theta: 0,
      })
      .transition(300)
  }

  </script>

  <script type="text/javascript">
  ThreeBox.preload([
    '/visualization/shaders.html',
  ], function () {

    // MathBox boilerplate
    var mathbox = window.mathbox = mathBox({
      cameraControls: true,
      cursor:         false,
      controlClass:   ThreeBox.OrbitControls,
      elementResize:  false,
      fullscreen:     false,
      screenshot:     true,
      stats:          false,
      scale:          1,
    }).start();

    window.mathboxSetup(mathbox);
  });
  function displayGraph(data) {
      killit(mathbox,data);
  }
  </script>

  <link href="base.css" rel="stylesheet" type="text/css" media="screen">

</head>
<body>
  <div id="info"></div>
</body>
</html>
